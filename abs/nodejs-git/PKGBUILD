# Contributor: Dongsheng Cai <dongsheng@moodle.com>
pkgname=nodejs-git
pkgver=0.3.2
pkgrel=38
pkgdesc="Evented I/O for V8 javascript"
arch=('i686' 'x86_64')
url="http://nodejs.org/"
license=('custom:nodejs')
depends=('gcc' 'coreutils' 'python2')
_gitname='node'

build() {
    cd ${srcdir}
    if [ -d $_gitname ]; then
        cd $_gitname
        msg "Updating local files"
        git pull . master
    else
        msg "Cloning git repository"
        git clone https://github.com/ry/node.git
    fi
    cd ${srcdir}/${_gitname}
    ./configure --prefix=/usr/ || return 1
    make || return 1
    tools/waf-light install --destdir=$pkgdir || return 1
}
