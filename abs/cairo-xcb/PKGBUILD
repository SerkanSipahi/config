# Maintainer: xduugu
# Contributor: Jan de Groot <jgc@archlinux.org>
# Contributor: Brice Carpentier <brice@daknet.org>

pkgname=cairo-xcb
pkgver=1.10.0
pkgrel=2
pkgdesc="Cairo vector graphics library"
arch=(i686 x86_64)
license=('LGPL' 'MPL')
url="http://cairographics.org/"
depends=('libpng>=1.4.0' 'libxrender' 'fontconfig>=2.8.0' 'pixman>=0.18.4' 'glib2>=2.24.0' 'xcb-util>=0.3.6')
makedepends=('pkgconfig')
provides=("cairo=$pkgver")
conflicts=('cairo')
options=('!libtool')
source=(http://cairographics.org/releases/${pkgname%-*}-${pkgver}.tar.gz
        cairo-1.10.0-buggy_gradients.patch)
md5sums=('70a2ece66cf473d976e2db0f75bf199e'
         '9b323790dab003e228c6955633cb888e')
sha256sums=('0f2ce4cc4615594088d74eb8b5360bad7c3cc3c3da9b61af9bfd979ed1ed94b2'
            '79085147567e6e080d5c1d7d2246f7d4be1efcc8e4b4fe44b6db1ebeae93c420')

build() {
  cd "${srcdir}/${pkgname%-*}-${pkgver}"
  patch -Np1 -i "${srcdir}/cairo-1.10.0-buggy_gradients.patch"
  ./configure --prefix=/usr --sysconfdir=/etc \
    --localstatedir=/var --enable-xcb --disable-static
  make
}

package() {
  cd "${srcdir}/${pkgname%-*}-${pkgver}"
  make DESTDIR="${pkgdir}" install
}
